{% extends 'project/dashboard.html' %}
{% block main_content %}

    <div class="panel panel-primary">
        <div class="panel-heading">
            Create Invoice
        </div>
        <div class="panel-body">
            <div class="form_errors">
                <ul class="list-group">
                    {% for error in form.non_field_errors %}
                        <li class="list-group-item"><strong>{{ error|escape }}</strong></li>
                    {% endfor %}
                </ul>
            </div>
            <form class="form-horizontal" method="post">
                {% csrf_token %}
                <div class="form-group">
                    <label for="id_customer" class="col-sm-2 control-label">{{ form.customer.label }}</label>

                    <div class="col-sm-8">
                    <select class="form-control" id="id_customer" name="customer">
                        {% for key, value in form.customer.field.choices %}
                            1, {{ form.customer.value }}, {{ key }}
                            <option value="{{ key }}" {% if form.customer.value == key %}selected{% endif %}>{{ value }}</option>
                        {% endfor %}
                    </select>
                    <p id="customerHelpBlock" class="form-text text-muted">{{ form.customer.help_text }}</p>
                        {% for error in form.customer.errors %}
                            <span class="help-block">{{ error|escape }}</span>
                        {% endfor %}
                    </div>
                </div>
                <div class="form-group">
                    <label for="id_date" class="col-sm-2 control-label">{{ form.date.label }}</label>

                    <div class="col-sm-8">
                    <input type="date" class="form-control" id="id_date" name="date"
                               {% if form.date.value %}value="{{ form.date.value }}"{% endif %}>
                    <p id="dateHelpBlock" class="form-text text-muted">{{ form.date.help_text }}</p>
                        {% for error in form.date.errors %}
                            <span class="help-block">{{ error|escape }}</span>
                        {% endfor %}
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-offset-2 col-sm-10">
                        <button type="submit" class="btn btn-primary">Create</button>
                    </div>
                </div>
                <table>
                    {{ invoice_items.management_form }}

                    {% for form in invoice_items.forms %}
                        {% if forloop.first %}
                            <thead>
                            <tr>
                                {% for field in form.visible_fields %}
                                    <th>{{ field.label|capfirst }}</th>
                                {% endfor %}
                            </tr>
                            </thead>
                        {% endif %}
                        <tr class="{% cycle row1,row2 %} formset_row">
                            {% for field in form.visible_fields %}
                                <td>
                                    {# Include the hidden fields in the form #}
                                    {% if forloop.first %}
                                        {% for hidden in form.hidden_fields %}
                                            {{ hidden }}
                                        {% endfor %}
                                    {% endif %}
                                    {{ field.errors.as_ul }}
                                    {{ field }}
                                </td>
                            {% endfor %}
                        </tr>
                    {% endfor %}
                </table>
            </form>
        </div>
    </div>
    <a href="{% url 'invoices:invoice_list' %}">Cancel</a>

{% endblock %}